import"./base-D5akLhLs.js";import{v as L}from"./el-loading-bkyKX7rn.js";import{E as D}from"./el-link-BMUDxFn4.js";import{t as N,s as T}from"./judge-CgskfyqQ.js";import{u as j,_ as B,v as V,w as A,T as F}from"./DraggableCodeEditor-OBSUezxZ.js";import{b as O}from"./Problem-DRDC1_Gh.js";import{_ as v}from"./MarkdownPlane.vue_vue_type_style_index_0_lang-7bPkwECM.js";import{E as w}from"./index-DoAQsUIb.js";import{d as q,i as g,j as M,o as p,c as d,x as $,g as t,t as h,a as u,f as x,F as I,h as z,q as S,w as G,e as H,p as K,m as Q}from"./index-C4LPoDef.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-global-config-B8zSw9bL.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./el-card-CeALd1R_.js";import"./el-form-item-CrIxGsqv.js";import"./constants-CgBtGoi7.js";import"./castArray-iw6Rl7wz.js";import"./use-form-item-Ba4znYgR.js";import"./index-C7WaZoJy.js";import"./_baseClone-BSaIAonx.js";import"./scroll-DjkzxiSA.js";import"./_initCloneObject-D9qHqQjg.js";import"./el-input-C0CdgXOc.js";import"./event-BB_Ol6Sd.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-popper-BV0gag_g.js";import"./focus-trap-BpxeXF_x.js";/* empty css               */import"./el-select-DEpjXFZI.js";import"./el-scrollbar-CDQ29gER.js";import"./index-Dvt1UXgE.js";import"./isEqual-DJnHwhR0.js";import"./el-button-DVtG45sK.js";import"./index-riLredlm.js";import"./CodeEditor-nFE5beaY.js";/* empty css                   */import"./index-Dz9PLotu.js";import"./index-Z7OnJ6oD.js";const m=_=>(K("data-v-ef43015f"),_=_(),Q(),_),W={class:"problem-detail-container"},X={key:0,class:"problem-description-box"},Y={class:"desc-header"},Z={class:"problem-title"},ee={class:"problem-info"},te={class:"topic-box"},oe={class:"topic-desc"},se=m(()=>t("div",{class:"desc-label"},"题目描述",-1)),ae={key:0,class:"output-desc"},le=m(()=>t("div",{class:"desc-label"},"数据范围",-1)),ie={class:"input-desc"},ne=m(()=>t("div",{class:"desc-label"},"输入格式",-1)),ce={class:"output-desc"},re=m(()=>t("div",{class:"desc-label"},"输出格式",-1)),pe={class:"test-sample-box"},ue=m(()=>t("div",{class:"desc-label"},"样例",-1)),de={key:1,class:"notes-box"},me=m(()=>t("div",{class:"desc-label"},"提示",-1)),_e={class:"problem-source"},ve={style:{width:"800px",height:"400px"}},ge=q({__name:"ProblemDetailPage",props:{display_id:String},setup(_){const y=g(),k=j(),E=_,b=g(),e=g(),s=g({pid:0,language:void 0,code:"",exampleInput:"",contestId:0,label:void 0,sseToken:""}),C=g(!1);let l=null;const P=async c=>{var r;l&&(l.close(),l=null);const i=k.getContent((r=e.value)==null?void 0:r.id);s.value.code=i.code,s.value.language=i.language,s.value.exampleInput=i.exampleInput,s.value.sseToken=V();const n="/api/judge/getJudgeResult/"+s.value.sseToken;let a;try{l=await A(n),l.onmessage=o=>{var f;console.log("成功接收到请求"),console.log(o),b.value=JSON.parse(o.data),console.log((f=b.value)==null?void 0:f.standardOutput),l&&(l.close(),l=null,console.log("触发showJudgeResult"),y.value.showJudgeResult(b.value))},c==="test"?a=await N(s.value):a=await T(s.value),a.code!==200&&w({title:"Error",message:a.msg,type:"error"})}catch(o){w({title:"Error",message:o.message,type:"error"})}},R=c=>{const i=/<input>([\s\S]*?)<\/input>/g,n=/<output>([\s\S]*?)<\/output>/g,a=c.match(i).map(o=>o.replace(/<input>|<\/input>/g,"")),r=c.match(n).map(o=>o.replace(/<output>|<\/output>/g,""));if(a.length!==r.length)throw new Error("输入和输出的数量不匹配");return a.map((o,f)=>({input:o.trim(),output:r[f].trim()}))},J=async c=>{var n;const i=await O({display_id:c});e.value=i.data,e.value.exampleList=R(e.value.examples),s.value.pid=(n=e.value)==null?void 0:n.id,C.value=!0};return M(async()=>{J(E.display_id)}),(c,i)=>{const n=D,a=L;return p(),d(I,null,[$((p(),d("div",W,[e.value?(p(),d("div",X,[t("div",Y,[t("div",Z,h(e.value.displayId)+" . "+h(e.value.title),1),t("div",ee,[t("p",null,"时间限制：C/C++ "+h(e.value.timeLimit)+"ms",1),t("p",null,"内存限制：C/C++ "+h(e.value.memoryLimit)+"mb",1)])]),t("div",te,[t("div",oe,[se,u(v,{content:e.value.description,class:"plane-box"},null,8,["content"])]),e.value.constraints?(p(),d("div",ae,[le,u(v,{content:e.value.constraints,class:"plane-box"},null,8,["content"])])):x("",!0),t("div",ie,[ne,u(v,{content:e.value.input,class:"plane-box"},null,8,["content"])]),t("div",ce,[re,u(v,{content:e.value.output,class:"plane-box"},null,8,["content"])]),t("div",pe,[ue,(p(!0),d(I,null,z(e.value.exampleList,(r,o)=>(p(),H(F,{key:o,example_id:o+1,example:r},null,8,["example_id","example"]))),128))]),e.value.notes?(p(),d("div",de,[me,u(v,{content:e.value.notes,class:"plane-box notes-box"},null,8,["content"])])):x("",!0),t("div",_e,[S(" 来源： "),u(n,{type:"primary"},{default:G(()=>[S(h(e.value.source),1)]),_:1})])])])):x("",!0)])),[[a,!e.value]]),t("div",ve,[u(B,{pid:s.value.pid,meta:s.value.pid,ref_key:"codeEditorRef",ref:y,style:{width:"100%",height:"100%"},onSubmitCode:P},null,8,["pid","meta"])])],64)}}}),et=U(ge,[["__scopeId","data-v-ef43015f"]]);export{et as default};
