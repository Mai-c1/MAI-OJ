import"./base-Ka2KZoYH.js";import{E as I}from"./el-card-Oo7BEc2D.js";import{b as N,a as z}from"./el-radio-group-DUuvUhJg.js";/* empty css                        */import{E as A}from"./el-progress-uaxwC5I6.js";/* empty css               */import{E as M}from"./el-button-wNzNAogA.js";import{d as $,s as j,i as q,A as G,j as U,l as a,o as g,c as F,a as s,w as r,f as H,b as J,u as K,r as L,g as o,q as f,t as d,e as E,n as O}from"./index-CS6SEU-6.js";import{b as Q,e as W}from"./contest-OrG-_iD7.js";import{u as X}from"./ContestStore-B2MajqY6.js";/* empty css                   */import{E as Y}from"./index-CDmpcwB0.js";import{E as Z}from"./index-BLhcNK8p.js";import{E as ee}from"./index-DO4gMTqJ.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-global-config-AkHI4voN.js";import"./event-BB_Ol6Sd.js";import"./use-form-item-TS4f4MsT.js";import"./constants-D8tHeVOq.js";import"./index-BIKjgQSY.js";import"./index-riLredlm.js";import"./httpAdmin-CJWFygbr.js";const se={key:0,class:"contest-detail-box"},oe={class:"contest-detail-header"},ae={class:"contest-title"},ne={class:"progress-box"},re={class:"time-box"},le={style:{padding:"30px"}},ce=$({__name:"ContestDetailPage",props:{cid:{}},setup(C){const m=C,k=X(),{contestInfo:t,problemSet:y}=j(k),b={0:{label:"未开始",status_class:"contest-status-not-started"},1:{label:"即将开始",status_class:"contest-status-pre-start"},2:{label:"进行中",status_class:"contest-status-progress"},3:{label:"即将结束",status_class:"contest-status-pre-end"},4:{label:"已结束",status_class:"contest-status-progress"}},_=J(),w=K(),l=q("contest-notice"),x=async n=>{const e=await W(n);e.code!==200&&Z({title:"Error",message:e.msg,type:"error"}),y.value=e.data.problemSet,t.value=e.data.contestInfo},T=G(()=>{let n=0;if(t.value){const e=new Date,i=new Date(t.value.beginTime),c=new Date(t.value.endTime);if(c<=e)return 100;n=Math.round((e.getTime()-i.getTime())/(c.getTime()-i.getTime())*100)}return n}),S=()=>{console.log(l.value),_.push({name:l.value})},P=async()=>{(await Q({cid:m.cid})).data?x(m.cid):(_.push("/contest/register/".concat(m.cid)),Y({message:"您尚未注册该场比赛",type:"warning"}))};return U(()=>{P(),l.value=w.name}),(n,e)=>{const i=M,c=ee,R=A,u=N,V=z,B=L("router-view"),D=I;return a(t)?(g(),F("div",se,[s(D,null,{header:r(()=>{var p,v,h;return[o("div",oe,[s(i,{style:{position:"absolute",top:"0",left:"0"},type:"primary",onClick:e[0]||(e[0]=ie=>a(_).back())},{default:r(()=>[f("返回")]),_:1}),o("div",ae,d((p=a(t))==null?void 0:p.title),1),o("div",null,[a(t).privatized?(g(),E(c,{key:0,type:"danger",effect:"dark",size:"large"},{default:r(()=>[f("私有比赛")]),_:1})):(g(),E(c,{key:1,effect:"dark",type:"success",size:"large"},{default:r(()=>[f("公共比赛")]),_:1}))]),o("div",ne,[o("div",re,[o("span",null,d((v=a(t))==null?void 0:v.beginTime),1),o("span",null,d((h=a(t))==null?void 0:h.endTime),1)]),s(R,{percentage:T.value,"stroke-width":10,color:"#54b2e7",striped:"","striped-flow":"",duration:30,"show-text":!1},null,8,["percentage"])]),o("div",{class:O(["contest-status",b[a(t).contestStatus].status_class])},d(b[a(t).contestStatus].label),3)])]}),default:r(()=>[s(V,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=p=>l.value=p),onChange:S,class:"radio-box"},{default:r(()=>[s(u,{label:"公告",value:"contest-notice"}),s(u,{label:"题目",value:"contest-problem-set"}),s(u,{label:"提交",value:"contest-submission"}),s(u,{label:"排名",value:"contest-rank"})]),_:1},8,["modelValue"]),o("div",le,[s(B)])]),_:1})])):H("",!0)}}}),De=te(ce,[["__scopeId","data-v-c135da6e"]]);export{De as default};
