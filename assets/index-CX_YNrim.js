import{f as oe,D as $,g as ne,R as B,w as O,j as ie,U as le,E as w,aa as ce,_ as re,x as ue}from"./base-Ka2KZoYH.js";import{v as de}from"./el-loading-BPn9wSS1.js";import{E as pe}from"./el-pagination-DG5YUGol.js";import"./el-input-B0t23iqQ.js";/* empty css               */import"./el-select-CnPuq6XV.js";import"./el-scrollbar-KMsVKTcq.js";import"./el-popper-BZ65vV3U.js";import{a0 as F,d as A,A as k,i as S,z as H,j as X,o as t,c as h,g as r,l as s,n as y,S as ve,e as i,w as p,O as V,f as v,t as I,a as z,P as J,M as fe,N as me,K as he,aq as W,b as Y,q as b,p as Z,m as x,x as Q,F as ge,h as ye,ah as be}from"./index-CS6SEU-6.js";import{E as _e}from"./index-DO4gMTqJ.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as ke}from"./contest-OrG-_iD7.js";import{i as Ie}from"./validator-svttBgG5.js";import{u as we,d as Se,t as Ce}from"./index-BIKjgQSY.js";import{U as K,C as q,I as R}from"./event-BB_Ol6Sd.js";import{u as Ve,a as Te,c as Ee,b as Pe}from"./use-form-item-TS4f4MsT.js";import{b as Ne}from"./use-global-config-AkHI4voN.js";import"./isEqual-ZSzoOShP.js";import"./scroll-BIrBud54.js";import"./constants-D8tHeVOq.js";import"./castArray-BBrPV4Ov.js";import"./focus-trap-CYXZ00VD.js";import"./httpAdmin-CJWFygbr.js";const $e=oe({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Ie},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:$},activeActionIcon:{type:$},activeIcon:{type:$},inactiveIcon:{type:$},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:ne(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...we(["ariaLabel"])}),Be={[K]:o=>B(o)||F(o)||O(o),[q]:o=>B(o)||F(o)||O(o),[R]:o=>B(o)||F(o)||O(o)},ze=["onClick"],Ae=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],Me=["aria-hidden"],Ue=["aria-hidden"],De=["aria-hidden"],te="ElSwitch",Le=A({name:te}),Oe=A({...Le,props:$e,emits:Be,setup(o,{expose:l,emit:u}){const a=o,{formItem:d}=Ve(),T=Te(),n=ie("switch"),{inputId:M}=Ee(a,{formItemContext:d}),_=Pe(k(()=>a.loading)),C=S(a.modelValue!==!1),f=S(),U=S(),D=k(()=>[n.b(),n.m(T.value),n.is("disabled",_.value),n.is("checked",c.value)]),L=k(()=>[n.e("label"),n.em("label","left"),n.is("active",!c.value)]),E=k(()=>[n.e("label"),n.em("label","right"),n.is("active",c.value)]),P=k(()=>({width:le(a.width)}));H(()=>a.modelValue,()=>{C.value=!0});const g=k(()=>C.value?a.modelValue:!1),c=k(()=>g.value===a.activeValue);[a.activeValue,a.inactiveValue].includes(g.value)||(u(K,a.inactiveValue),u(q,a.inactiveValue),u(R,a.inactiveValue)),H(c,e=>{var m;f.value.checked=e,a.validateEvent&&((m=d==null?void 0:d.validate)==null||m.call(d,"change").catch(se=>Se()))});const N=()=>{const e=c.value?a.inactiveValue:a.activeValue;u(K,e),u(q,e),u(R,e),he(()=>{f.value.checked=c.value})},j=()=>{if(_.value)return;const{beforeChange:e}=a;if(!e){N();return}const m=e();[W(m),B(m)].includes(!0)||Ce(te,"beforeChange must return type `Promise<boolean>` or `boolean`"),W(m)?m.then(G=>{G&&N()}).catch(G=>{}):m&&N()},ae=()=>{var e,m;(m=(e=f.value)==null?void 0:e.focus)==null||m.call(e)};return X(()=>{f.value.checked=c.value}),Ne({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},k(()=>!!a.label)),l({focus:ae,checked:c}),(e,m)=>(t(),h("div",{class:y(s(D)),onClick:me(j,["prevent"])},[r("input",{id:s(M),ref_key:"input",ref:f,class:y(s(n).e("input")),type:"checkbox",role:"switch","aria-checked":s(c),"aria-disabled":s(_),"aria-label":e.label||e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:s(_),tabindex:e.tabindex,onChange:N,onKeydown:ve(j,["enter"])},null,42,Ae),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(t(),h("span",{key:0,class:y(s(L))},[e.inactiveIcon?(t(),i(s(w),{key:0},{default:p(()=>[(t(),i(V(e.inactiveIcon)))]),_:1})):v("v-if",!0),!e.inactiveIcon&&e.inactiveText?(t(),h("span",{key:1,"aria-hidden":s(c)},I(e.inactiveText),9,Me)):v("v-if",!0)],2)):v("v-if",!0),r("span",{ref_key:"core",ref:U,class:y(s(n).e("core")),style:fe(s(P))},[e.inlinePrompt?(t(),h("div",{key:0,class:y(s(n).e("inner"))},[e.activeIcon||e.inactiveIcon?(t(),i(s(w),{key:0,class:y(s(n).is("icon"))},{default:p(()=>[(t(),i(V(s(c)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(t(),h("span",{key:1,class:y(s(n).is("text")),"aria-hidden":!s(c)},I(s(c)?e.activeText:e.inactiveText),11,Ue)):v("v-if",!0)],2)):v("v-if",!0),r("div",{class:y(s(n).e("action"))},[e.loading?(t(),i(s(w),{key:0,class:y(s(n).is("loading"))},{default:p(()=>[z(s(ce))]),_:1},8,["class"])):s(c)?J(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?(t(),i(s(w),{key:0},{default:p(()=>[(t(),i(V(e.activeActionIcon)))]),_:1})):v("v-if",!0)]):s(c)?v("v-if",!0):J(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?(t(),i(s(w),{key:0},{default:p(()=>[(t(),i(V(e.inactiveActionIcon)))]),_:1})):v("v-if",!0)])],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(t(),h("span",{key:1,class:y(s(E))},[e.activeIcon?(t(),i(s(w),{key:0},{default:p(()=>[(t(),i(V(e.activeIcon)))]),_:1})):v("v-if",!0),!e.activeIcon&&e.activeText?(t(),h("span",{key:1,"aria-hidden":!s(c)},I(e.activeText),9,De)):v("v-if",!0)],2)):v("v-if",!0)],10,ze))}});var Fe=re(Oe,[["__file","switch.vue"]]);const Ke=ue(Fe),qe=""+new URL("ACM-LOGO-CUqqptBJ.png",import.meta.url).href,Re=o=>(Z("data-v-977c04b0"),o=o(),x(),o),je=Re(()=>r("img",{src:qe,class:"left"},null,-1)),Ge={class:"right"},He={class:"contest-title"},Je={style:{"font-size":"1.25em","margin-right":"10px"}},We={style:{color:"#bd2c00","font-weight":"bold"}},Qe={class:"contest-status"},Xe=A({__name:"ContestItem",props:{contest:{}},setup(o){return Y(),(l,u)=>{const a=_e;return t(),h("div",{class:"contest-card-box",onClick:u[0]||(u[0]=d=>l.$router.push("/contest/".concat(l.contest.id)))},[je,r("div",Ge,[r("p",He,[r("span",Je,I(l.contest.title),1),l.contest.privatized!=0?(t(),i(a,{key:0,type:"danger"},{default:p(()=>[b("私有")]),_:1})):(t(),i(a,{key:1},{default:p(()=>[b("公开")]),_:1}))]),r("p",null,[z(a,{effect:"dark"},{default:p(()=>[b("ACM赛制")]),_:1})]),r("p",null,I(l.contest.beginTime)+" 至 "+I(l.contest.endTime),1),r("p",null,[b("创建者："),r("span",We,I(l.contest.nickname),1)])]),r("div",Qe,[l.contest.contestStatus==0?(t(),i(a,{key:0,type:"info",size:"large",effect:"dark"},{default:p(()=>[b("未开始")]),_:1})):l.contest.contestStatus==1?(t(),i(a,{key:1,type:"warning",size:"large",effect:"dark"},{default:p(()=>[b("即将开始")]),_:1})):l.contest.contestStatus==2?(t(),i(a,{key:2,type:"primary",size:"large",effect:"dark"},{default:p(()=>[b("进行中")]),_:1})):l.contest.contestStatus==3?(t(),i(a,{key:3,type:"danger",size:"large",effect:"dark"},{default:p(()=>[b("即将结束")]),_:1})):l.contest.contestStatus==4?(t(),i(a,{key:4,type:"success",size:"large",effect:"dark"},{default:p(()=>[b("已结束")]),_:1})):v("",!0)])])}}}),Ye=ee(Xe,[["__scopeId","data-v-977c04b0"]]),Ze=o=>(Z("data-v-0a1c3999"),o=o(),x(),o),xe={class:"contest-box"},et={class:"contest-list"},tt={key:0,class:"dashboard"},at={class:"search-box"},st=Ze(()=>r("span",{style:{color:"#fdfdfd"}},"查看已报名比赛",-1)),ot=A({__name:"index",setup(o){const l=Y(),u=S(),a=S(!1),d=S({page:1,pageSize:10,sortBy:"",isAsc:!1,title:"",onlyMe:!1});let T=null;const n=()=>{clearTimeout(T),T=setTimeout(()=>{_(),window.scrollTo({top:0,behavior:"smooth"})},1e3)},M=async()=>{l.push({name:"contestPage",query:{page:d.value.page}}),_()},_=async()=>{a.value=!0;const C=await ke(d.value);u.value=C.data,a.value=!1};return X(()=>{_()}),(C,f)=>{var E,P;const U=pe,D=Ke,L=de;return t(),h("div",xe,[Q((t(),h("div",et,[(t(!0),h(ge,null,ye((E=u.value)==null?void 0:E.records,g=>(t(),i(Ye,{key:g.id,contest:g},null,8,["contest"]))),128)),z(U,{background:"",layout:"prev, pager, next",class:"page-box","current-page":d.value.page,"onUpdate:currentPage":f[0]||(f[0]=g=>d.value.page=g),onCurrentChange:M,total:(P=u.value)==null?void 0:P.total,style:{float:"right",padding:"10px"}},null,8,["current-page","total"])])),[[L,a.value]]),u.value?(t(),h("div",tt,[r("div",at,[Q(r("input",{placeholder:"搜索比赛","onUpdate:modelValue":f[1]||(f[1]=g=>d.value.title=g),onInput:n},null,544),[[be,d.value.title]]),st,z(D,{modelValue:d.value.onlyMe,"onUpdate:modelValue":f[2]||(f[2]=g=>d.value.onlyMe=g),onClick:n,"active-value":1,"inactive-value":0},null,8,["modelValue"])])])):v("",!0)])}}}),Et=ee(ot,[["__scopeId","data-v-0a1c3999"]]);export{Et as default};
